<br />
<b>Deprecated</b>:  Creation of dynamic property Typecho\Widget\Request::$feed is deprecated in <b>E:\CloudMusic\VSCode\Home\Apache24\htdocs\var\Widget\Archive.php</b> on line <b>253</b><br />
<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"
xmlns:thr="http://purl.org/syndication/thread/1.0"
xml:lang="zh-CN"
xml:base="https://dhui626.github.io/index.php/category/default/"
>
<title type="text">dhui&#039;s Blog - 默认分类</title>
<subtitle type="text">只是一个默认分类</subtitle>
<updated>2023-11-01T06:50:00+00:00</updated>
<generator uri="http://typecho.org/" version="1.2.1">Typecho</generator>
<link rel="alternate" type="text/html" href="https://dhui626.github.io/index.php/category/default/" />
<id>https://dhui626.github.io/index.php/feed/atom/category/default/</id>
<link rel="self" type="application/atom+xml" href="https://dhui626.github.io/index.php/feed/atom/category/default/" />
<entry>
<title type="html"><![CDATA[B-spline 插值 自然边界条件证明]]></title>
<link rel="alternate" type="text/html" href="https://dhui626.github.io/index.php/archives/51/" />
<id>https://dhui626.github.io/index.php/archives/51/</id>
<updated>2023-11-01T06:50:00+00:00</updated>
<published>2023-11-01T06:50:00+00:00</published>
<author>
    <name>dhui</name>
    <uri>https://dhui626.github.io/</uri>
</author>
<summary type="html"><![CDATA[B-spline 插值 自然边界条件证明定理： 四阶(三次) B-spline 插值 的自然边界条件可以简化成如下方程组：$$\frac{\textbf{d}_{2}-\textbf{d}_{1...]]></summary>
<content type="html" xml:base="https://dhui626.github.io/index.php/archives/51/" xml:lang="zh-CN"><![CDATA[
<h1>B-spline 插值 自然边界条件证明</h1><p><strong>定理：</strong> 四阶(三次) B-spline 插值 的自然边界条件可以简化成如下方程组：</p><p>$$
\frac{\textbf{d}_{2}-\textbf{d}_{1}}{t_{2}-t_{0}} = \frac{\textbf{d}_{1}-\textbf{d}_{0}}{t_{1}-t_{0}} \\
\frac{\textbf{d}_{n+2}-\textbf{d}_{n+1}}{t_{n}-t_{n-1}} = \frac{\textbf{d}_{n+1}-\textbf{d}_{n}}{t_{n}-t_{n-2}}
$$</p><p><strong>证明</strong>：$N_{i,k}(t)$ 参考老师 ppt 的定义，$k$ 是阶数。它的导数为</p><p>$$
N&#039;_{i,k}(t) = \frac{k}{t_{i+k}-t_i}N_{i,k-1}(t) - \frac{k}{t_{i+k+1}-t_{i+1}}N_{i+1,k-1}(t)
$$</p><p>证明见 <a href="http://mat.fsv.cvut.cz/gcg/sbornik/prochazkova.pdf">Reference1</a> ，使用了数学归纳法。故 B-spline 的一阶导数为：</p><p>$$
x(t) = \sum_{i=0}^n N_{i,k}(t) \textbf{d}_i \\
x&#039;(t) = \sum_{i=0}^{n-1} N_{i+1,k-1}(t) \textbf{Q}_i \\
\textbf{Q}_i = \frac{k}{t_{i+k+1}-t_{i+1}}(\textbf{d}_{i+1}-\textbf{d}_{i})
$$</p><p>推导见 <a href="https://public.vrac.iastate.edu/~oliver/courses/me625/week5b.pdf">Reference2</a> 。然后可以写出二阶导数的形式如下。</p><p>$$
x&#039;&#039;(t) = \sum_{i=0}^{n-2} N_{i+2,k-2}(t) \textbf{R}_i \\
\textbf{R}_i = \frac{k-1}{t_{i+k+1}-t_{i+2}}(\textbf{Q}_{i+1}-\textbf{Q}_{i})
$$</p><p>在 B-spline 插值问题中，$k = 4$。指标从 -3 开始。求和范围和 $\textbf{d}_{i}$ 的指标需要相应改变，其他不需要。</p><p>$$
x(t) = \sum_{i=-3}^{n-1} N_{i,4}(t) \textbf{d}_{i+3} \\
x&#039;(t) = \sum_{i=-3}^{n-2} N_{i+1,3}(t) \textbf{Q}_{i} \\
x&#039;&#039;(t) = \sum_{i=-3}^{n-3} N_{i+2,2}(t) \textbf{R}_{i} \\
$$</p><p>因为 $N_{i,2}(t)$ 只在 $(t_i,t_{i+2})$ 区间非零，边界条件 $x&#039;&#039;(t_0)=0$ 等价于如下形式。</p><p>$$
N_{-1,2}(t_0)\textbf{R}_{-3}=0
$$</p><p>根据 $\textbf{R}_{i}$ 的表达式，边界条件等价于</p><p>$$
\textbf{Q}_{-2}=\textbf{Q}_{-3} \\
$$</p><p>等价于</p><p>$$
\frac{\textbf{d}_{2}-\textbf{d}_{1}}{t_{3}-t_{-1}} = \frac{\textbf{d}_{1}-\textbf{d}_{0}}{t_{2}-t_{-2}}
$$</p><p>由重结点定义，$t_{-1} = t_{-2} = t_{0}$ ，得到所需的边界条件。 </p><p>在 $t_n$ 处的自然边界条件也能用同样的方法算出。</p>
]]></content>
<link rel="replies" type="text/html" href="https://dhui626.github.io/index.php/archives/51/#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://dhui626.github.io/index.php/feed/atom/category/default/" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[Linux初上手记录]]></title>
<link rel="alternate" type="text/html" href="https://dhui626.github.io/index.php/archives/25/" />
<id>https://dhui626.github.io/index.php/archives/25/</id>
<updated>2023-10-28T17:19:00+00:00</updated>
<published>2023-10-28T17:19:00+00:00</published>
<author>
    <name>dhui</name>
    <uri>https://dhui626.github.io/</uri>
</author>
<summary type="html"><![CDATA[当时并没有详细记录的意识，只记录了相关代码，某些步骤现在已经看不懂了xwsl命令备份还原wsl --export Ubuntu C:\OWO\CloudMusic\wslbkp.tarwsl -...]]></summary>
<content type="html" xml:base="https://dhui626.github.io/index.php/archives/25/" xml:lang="zh-CN"><![CDATA[
<p>当时并没有详细记录的意识，只记录了相关代码，某些步骤现在已经看不懂了x</p><p><strong>wsl命令</strong></p><p>备份还原</p><pre><code>wsl --export Ubuntu C:\OWO\CloudMusic\wslbkp.tar
wsl --import Ubuntu C:\CloudMusic C:\OWO\CloudMusic\wslbkp.tar</code></pre><p>卸载子系统</p><pre><code>wsl --list --all
wsl --unregister Ubuntu</code></pre><p>安装桌面 gnome（失败）</p><pre><code>sudo apt-get install ubuntu-desktop gnome</code></pre><p>安装 systemd（失败）</p><pre><code>git clone https://github.com/DamionGans/ubuntu-wsl2-systemd-script.git
cd ubuntu-wsl2-systemd-script/</code></pre><p>修改 enter-systemd-namespace <a href="https://github.com/DamionGans/ubuntu-wsl2-systemd-script/issues/36">参考</a></p><pre><code>bash ubuntu-wsl2-systemd-script.sh     //系统会崩溃</code></pre><p>设置默认Linux开发版</p><pre><code>wslconfig /setdefault Ubuntu-20.04</code></pre><p>配置代理（Clash开启允许局域网连接）</p><pre><code>export hostip=$(cat /etc/resolv.conf |grep -oP &#039;(?&lt;=nameserver\ ).*&#039;);
export https_proxy=&quot;http://${hostip}:7890&quot;;
export http_proxy=&quot;http://${hostip}:7890&quot;;
export all_proxy=&quot;socks5://${hostip}:7891&quot;;</code></pre><p>git 通过代理</p><pre><code>git clone -c http.proxy=&quot;http://127.0.0.1:1080&quot; https://github.com/TIGERB/easy-php.git</code></pre><p>apt相关</p><pre><code>sudo apt -o Acquire::http::proxy=&quot;http://${hostip}:7890&quot; install nvidia-cuda-toolkit
sudo apt search libdc1394
sudo apt install 
sudo apt purge libopencv-dev python3-opencv
sudo apt autoremove</code></pre><p>OpenCV（2.4.11 3.2.0均编译失败，而3.4.5可以无错误编译，<a href="https://github.com/Itseez/opencv/archive/3.4.5.zip">下载链接</a>）<br><a href="https://blog.csdn.net/hltt3838/article/details/113962104">参考</a></p><p>编译用代码</p><pre><code>mkdir build &amp;&amp; cd build
cmake ..
make -j8
sudo make install
sudo ldconfig</code></pre><p>窗口显示<br>VcXsvr 勾上 Disable access control 选项</p><pre><code>nano ~/.bashrc</code></pre><p>最后加上</p><pre><code>export DISPLAY=`grep -oP &quot;(?&lt;=nameserver ).+&quot; /etc/resolv.conf`:0.0</code></pre><p>刷新shell的配置</p><pre><code>source ~/.bashrc</code></pre><p>Draft</p><pre><code>netsh int ipv4 set dynamic tcp start=49152 num=16384</code></pre><p><strong>相关教程资料</strong></p><p><a href="https://wiki.ubuntu.org.cn/Ubuntu%E6%A1%8C%E9%9D%A2%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97">Ubuntu桌面入门指南</a></p><p><a href="https://sspai.com/post/43813">不用装双系统，直接在 Windows 上体验 Linux：Windows Subsystem for Linux - 少数派</a></p><p><a href="https://blacksand.top/2021/12/03/%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B%E2%94%80%E2%94%80%E5%A6%82%E4%BD%95%E5%9C%A8Linux%E4%B8%8A%E6%B8%B8%E7%8E%A9osu!stable/">快速上手──在 Linux 上游玩 osu!stable | 砂糖砂糖沙</a></p><p><a href="https://blog.csdn.net/hltt3838/article/details/113962104">ORB-SLAM2 “工具安装 和 系统运行“ 详细过程</a></p><p><a href="https://github.com/DEEPIR/ElasticFusion">GitHub - DEEPIR/ElasticFusion</a></p><p><a href="https://codeantenna.com/a/y4IHTfrdz5">ElasticFusion的编译 - CodeAntenna</a></p><p><a href="http://blog.leanote.com/post/gaunthan/Windows-10-WSL2-%E6%98%BE%E7%A4%BA-Matplotlib-%E5%9B%BE%E5%83%8F">Windows 10, WSL2 显示 GUI 窗口</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://dhui626.github.io/index.php/archives/25/#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://dhui626.github.io/index.php/feed/atom/category/default/" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[Visual Studio 踩坑记录]]></title>
<link rel="alternate" type="text/html" href="https://dhui626.github.io/index.php/archives/24/" />
<id>https://dhui626.github.io/index.php/archives/24/</id>
<updated>2023-10-28T17:04:00+00:00</updated>
<published>2023-10-28T17:04:00+00:00</published>
<author>
    <name>dhui</name>
    <uri>https://dhui626.github.io/</uri>
</author>
<summary type="html"><![CDATA[运行环境：Windows 10 22H2 x64 + Visual Studio 2022vcpkgvcpkg 是 Microsoft 的跨平台开源软件包管理器，极大地简化了 Windows、L...]]></summary>
<content type="html" xml:base="https://dhui626.github.io/index.php/archives/24/" xml:lang="zh-CN"><![CDATA[
<p>运行环境：Windows 10 22H2 x64 + Visual Studio 2022</p><h2 id="toc_0">vcpkg</h2><p>vcpkg 是 Microsoft 的跨平台开源软件包管理器，极大地简化了 Windows、Linux 和 macOS 上第三方库的配置与安装。<a href="https://vcpkg.io/">官网</a></p><h3 id="toc_1">配置教程</h3><p><strong>Step 1: 从 GitHub 克隆 vcpkg</strong></p><pre><code>git clone https://github.com/Microsoft/vcpkg.git
cd vcpkg</code></pre><p>注意vcpkg目录的位置，确保文件路径长度合适以及可以存储较大数据。</p><p><strong>Step 2: 运行 bootstrap</strong></p><pre><code>./bootstrap-vcpkg.bat</code></pre><p><strong>Step 3: 将包自动集成到 vs 的工程中</strong></p><pre><code>./vcpkg integrate install</code></pre><p>之后缺哪个运行库只需在该文件夹打开 powershell 运行 vcpkg 安装指令即可。</p><h3 id="toc_2">常用命令</h3><p>搜索包</p><pre><code>./vcpkg search [packages]</code></pre><p>安装包（输入上面搜出的包名）</p><pre><code>./vcpkg install &lt;pkg&gt;</code></pre><p>查看已安装包列表</p><pre><code>./vcpkg list</code></pre><p>删除包</p><pre><code>./vcpkg remove &lt;pkg&gt;</code></pre><p>帮助</p><pre><code>./vcpkg help</code></pre><p>卸载 vcpkg（并在之后删除此文件夹）</p><pre><code>./vcpkg integrate remove</code></pre><p>举例</p><pre><code>.\vcpkg install eigen3:x64-windows
.\vcpkg install opencv4[contrib]:x64-windows
.\vcpkg install qt5-base:x64-windows</code></pre><h3 id="toc_3">清理空间</h3><p>在文档<code>docs/about/faq.md</code>中提到：</p><pre><code class="lang-markdown">## How can I remove temporary files?

You can save some disk space by completely removing the `packages\`, `buildtrees\`, and `downloads\` folders.</code></pre><p>​    参考 @zhc 笔记，删除<code>buildtrees\</code>可能导致静态库无法调试。</p><h3 id="toc_4">网络问题</h3><p>使用代理服务器进行网络加速时，PowerShell 终端默认不走代理端口。为此可以在 PowerShell 中运行：</p><pre><code>$env:HTTP_PROXY=&quot;localhost:7890&quot;
$env:HTTPS_PROXY=&quot;localhost:7890&quot;</code></pre><p>上述代理服务器端口因设备而异，仅改变本次端口设置。</p><p>如果需要设置全局代理，可在环境变量中设置</p><pre><code>http_proxy         http://127.0.0.1:7890/
https_proxy     http://127.0.0.1:7890/</code></pre><p>CMake 时遇到网络问题：在 CMakeLists.txt 的前面添加如下代码</p><pre><code>set(ENV{http_proxy} &quot;http://127.0.0.1:7890&quot;)
set(ENV{https_proxy} &quot;http://127.0.0.1:7890&quot;)</code></pre><h2 id="toc_5">项目配置</h2><h3 id="toc_6">CMake</h3><p><strong>方法一</strong>：使用 CMake-GUI</p><p>选择源代码位置、build 目录，只需 Configure、Generate、Open Project 三步。</p><p>若出错则需要对应报错信息找错。大部分错误是找不到依赖库。</p><p><strong>方法二</strong>：使用 VS 内置</p><p>新建一个空的 VS 项目，文件-打开-CMake，选中 CMakeLists.txt</p><p>打开CMake设置-高级-CMake生成器-改为VS2022 Win64</p><h3 id="toc_7">注意点</h3><ol><li>请勿新建一个项目，然后将代码文件(.cpp .h等)加入项目，折磨且成功率低</li><li>配置前确认项目可以在win环境生成，如某些依赖库只支持 Linux 系统，需要使用 WSL 生成</li></ol><h3 id="toc_8">字体</h3><p>YaHei Consolas Hybrid 1.12</p><p>Fira Code</p><h3 id="toc_9">命令行参数</h3><p>项目-属性-配置属性-调试-命令行参数</p><h3 id="toc_10">包含目录出错</h3><p>无法打开源文件：fstream</p><p>包含目录只要有一个错的，后面的包含目录都会出错。</p><p>删去不正确的包含目录即可。</p><h2 id="toc_11">Eigen 库使用</h2><p>svd 分解</p><pre><code class="lang-cpp">Eigen::JacobiSVD&lt;Eigen::Matrix3d&gt; svd(J, Eigen::ComputeFullU| Eigen::ComputeFullV);        Eigen::Matrix3d U = svd.matrixU();
Eigen::Matrix3d S = svd.singularValues();
Eigen::Matrix3d V = svd.matrixV();  //J = U * S * V.T</code></pre>
]]></content>
<link rel="replies" type="text/html" href="https://dhui626.github.io/index.php/archives/24/#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://dhui626.github.io/index.php/feed/atom/category/default/" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[Jellyfin 折腾记录]]></title>
<link rel="alternate" type="text/html" href="https://dhui626.github.io/index.php/archives/23/" />
<id>https://dhui626.github.io/index.php/archives/23/</id>
<updated>2023-10-28T16:57:00+00:00</updated>
<published>2023-10-28T16:57:00+00:00</published>
<author>
    <name>dhui</name>
    <uri>https://dhui626.github.io/</uri>
</author>
<summary type="html"><![CDATA[运行环境：Windows 10 22H2 x64 + Jellyfin Server 10.8.11介绍Jellyfin官网 + 文档查看官网介绍，本应用是一种媒体存储方案，并附加共享功能，可以...]]></summary>
<content type="html" xml:base="https://dhui626.github.io/index.php/archives/23/" xml:lang="zh-CN"><![CDATA[
<p>运行环境：Windows 10 22H2 x64 + Jellyfin Server 10.8.11</p><h2 id="toc_12">介绍</h2><p><a href="https://jellyfin.org/">Jellyfin官网</a> + <a href="https://jellyfin.org/docs/">文档</a></p><p>查看官网介绍，本应用是一种媒体存储方案，并附加共享功能，可以搭建自己的媒体服务器网络。该应用具有多平台支持，只要有浏览器即可。该软件免费，now and always。</p><h2 id="toc_13">安装</h2><p><a href="https://www.himiku.com/archives/deploy-a-more-comfortable-animation-library-with-jellyfin-and-bangumi.html">利用 Jellyfin + Bangumi 打造更舒适的动画媒体库</a></p><p>安装后的设置可参考如上文章，笔者在安装结束之后才看到本文。</p><p>密码可以留空。</p><p>转码设置默认也行，博客作者建议全部勾选。</p><p><strong>插件安装</strong>：「插件 - 存储库」点击加号，添加如下网址：</p><pre><code>https://jellyfin-plugin-bangumi.pages.dev/repository.json</code></pre><p>然后在「插件 - 目录 - 元数据」找到 Bangumi 插件安装，重启 Jellyfin</p><h2 id="toc_14">媒体库设置</h2><p><strong>动画</strong>：内容类型选择「节目」</p><p>命名规则：将文件名加上 Season 和 Episode 信息。</p><p>示例：</p><pre><code>Shows
├── Series (2010)
│   ├── Season 00
│   │   ├── Some Special.mkv
│   │   ├── Episode S00E01.mkv
│   │   └── Episode S00E02.mkv
│   ├── Season 01
│   │   ├── Episode S01E01-E02.mkv
│   │   ├── Episode S01E03.mkv
│   │   └── Episode S01E04.mkv
│   └── Season 02
│       ├── Episode S02E01.mkv
│       ├── Episode S02E02.mkv
│       ├── Episode S02E03 Part 1.mkv
│       └── Episode S02E03 Part 2.mkv
└── Series (2018)
    ├── Episode S01E01.mkv
    ├── Episode S01E02.mkv
    ├── Episode S02E01-E02.mkv
    └── Episode S02E03.mkv</code></pre><p>重命名教程：</p><p>利用 Renamer Pro 的插入 + 序列化功能。</p><p>@miracle 的建议：不需要重命名，Jellyfin会自动识别。且若文件夹名和种子文件相同，还可以做种。</p><p>但根据测试，季度信息文件夹，如多季度番剧的 S01~S0x 文件夹还是需要创建并拖进相应视频的。 </p><p><strong>电影</strong>：内容类型选择「电影」</p><p>三次元电影 bangumi 索引不到，可以提高 tmdb 的优先级。</p><p>ass 字幕出现方块字：播放 - 备用字体文件路径</p><p><strong>漫画</strong>：内容类型选择「照片」</p><p>添加相应的文件夹后需要手动扫描媒体库，以获得漫画封面信息。</p><p><strong>书籍</strong>：内容类型选择「书籍」</p><p>能识别 epub 但不能识别 txt 文件，需要手动转换。且 epub 不会生成封面。</p><p><strong>音乐</strong>：内容类型选择「音乐」</p><p>建议按专辑建立文件夹存放。</p><h2 id="toc_15">服务器建立</h2><p><a href="http://www.test-ipv6.com/">测试 IPv6 连接</a> </p><p>Jellyfin 联网设置中开启 IPv4, IPv6 功能。</p><p>如果运气很好，网络环境有公网 IPv4，可以用 http://[IPv4地址]:8096/ 访问。</p><p>如果设置得当，网络环境有公网 IPv6，可以用 http://[IPv6地址]:8096/ 访问。</p><p>目前大部分网络没有 IPv4，但支持打开 IPv6，需在路由器中设置。</p><p>而有些学校的宿舍网络并不支持 IPv6，更别说 IPv4 了，有如下两种解决办法：</p><ul><li>使用流量网络（这总支持 IPv6 了吧，不行的话直接 call 运营商总部）</li><li>反向代理</li></ul><p>反向代理设置教程：</p><p><strong>使用 frp</strong>：需要有 VPS（没有，遂搁置）</p><p>教程：<a href="https://sspai.com/post/52523">使用frp进行内网穿透</a>    <a href="https://moe.best/tutorial/frp.html">frp 内网穿透神器搭建 萌新也看得懂的教程系列</a></p><p><strong>使用 SakuraFrp</strong>：</p><p>注册登录下载安装，一气呵成。</p><p>参考教程：<a href="https://doc.natfrp.com/app/http.html">HTTP(S) 协议穿透指南</a></p><p>隧道类型选 TCP，海外节点支持 http 协议，但会经常断线重连，故选择内地节点。</p><p>新建穿透隧道 - 输入本地 ip 和端口 - 选择穿透结点（ping一下）- 创建</p><p>内地节点 + http 无法正常访问：隧道列表 - 编辑 - 打开自动 HTTPS </p><p>Chrome 浏览器会提示连接不安全。</p><p>这不对劲，虽然已经实现目标了，但不安全</p><p><strong>Jellyfin 开启 https 访问</strong>：</p><p>没有 ssl 证书咋整啊？可以自建。<a href="https://blog.csdn.net/qq243920161/article/details/119963501">参考</a></p><p>下载 openssl：<a href="https://slproweb.com/products/Win32OpenSSL.html">Win32/Win64 OpenSSL Installer for Windows - Shining Light Productions</a></p><p>若安装步骤中未勾选 Copy OpenSSL DLLs to: The Windows system directory，需要手动添加环境变量。</p><p>生成私钥文件</p><pre><code>openssl genrsa -des3 -out localhost.key 2048</code></pre><p>去除口令</p><pre><code>openssl rsa -in localhost.key -out localhost.key</code></pre><p>创建请求证书</p><pre><code>openssl req -new -key localhost.key -out localhost.csr</code></pre><p>生成证书</p><pre><code>openssl x509 -req -days 36500 -in localhost.csr -signkey localhost.key -out localhost.crt</code></pre><p>这样就生成了三个文件：</p><pre><code>localhost.crt
localhost.csr
localhost.key</code></pre><p>然后将证书文件转换为 Jellyfin 能读取的 PFX 文件：<a href="https://www.ssldun.com/tools/ssl-converter.php">网站1</a> <a href="https://www.chinassl.net/ssltools/convert-ssl.html">网站2</a></p><p>Jellyfin 控制台 - 联网 - 启用 HTTPS + 自定义 SSL证书路径（选择刚才转换完成的 pfx 文件）。</p><p>但 Chrome 打开网站还是会显示不安全！但至少能用了。</p><p>安全证书颁发方法：使用 Active Directory 证书服务 <a href="https://www.tangyuecan.com/2021/12/17/%E5%B1%80%E5%9F%9F%E7%BD%91%E5%86%85%E6%90%AD%E5%BB%BA%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8F%AF%E4%BF%A1%E4%BB%BB%E7%9A%84ssl%E8%AF%81%E4%B9%A6/">教程</a> 。</p><p>参考这篇文章？<a href="https://cloud.tencent.com/developer/article/1705305">本地安排上HTTPS的最佳途径~</a> 暂时搁置。</p>
]]></content>
<link rel="replies" type="text/html" href="https://dhui626.github.io/index.php/archives/23/#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://dhui626.github.io/index.php/feed/atom/category/default/" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[测试数学公式]]></title>
<link rel="alternate" type="text/html" href="https://dhui626.github.io/index.php/archives/6/" />
<id>https://dhui626.github.io/index.php/archives/6/</id>
<updated>2023-10-28T12:49:00+00:00</updated>
<published>2023-10-28T12:49:00+00:00</published>
<author>
    <name>dhui</name>
    <uri>https://dhui626.github.io/</uri>
</author>
<summary type="html"><![CDATA[行间公式测试：$$a + \frac{|ac| \vec{n_1}+|ab| \vec{n_2}}{2 sin\theta}$$行内公式测试：其中 $\vec{n_1}$ 和 $\vec{n_2...]]></summary>
<content type="html" xml:base="https://dhui626.github.io/index.php/archives/6/" xml:lang="zh-CN"><![CDATA[
<p><strong>行间公式测试：</strong></p><p>$$
a + \frac{|ac| \vec{n_1}+|ab| \vec{n_2}}{2 sin\theta}
$$</p><p><strong>行内公式测试：</strong></p><p>其中 $\vec{n_1}$ 和 $\vec{n_2}$ 分别是垂直于 $ab$ 和垂直于 $ac$ 的单位向量，$\theta$ 是 $ab$ 和 $ac$ 的夹角。平移两条垂线组成一个平行四边形易验证外心关系。</p>
]]></content>
<link rel="replies" type="text/html" href="https://dhui626.github.io/index.php/archives/6/#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://dhui626.github.io/index.php/feed/atom/category/default/" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[个人网站 搭建记录]]></title>
<link rel="alternate" type="text/html" href="https://dhui626.github.io/index.php/archives/3/" />
<id>https://dhui626.github.io/index.php/archives/3/</id>
<updated>2023-10-26T15:11:00+00:00</updated>
<published>2023-10-26T15:11:00+00:00</published>
<author>
    <name>dhui</name>
    <uri>https://dhui626.github.io/</uri>
</author>
<summary type="html"><![CDATA[个人网站 搭建记录运行环境：Windows 10 22H2软件版本：Apache 2.4 + PHP 8.2.12 + MySQL 8.2.0搭建教程准备安装 Typecho 进行搭建网页测试。...]]></summary>
<content type="html" xml:base="https://dhui626.github.io/index.php/archives/3/" xml:lang="zh-CN"><![CDATA[
<h1>个人网站 搭建记录</h1><p>运行环境：Windows 10 22H2</p><p>软件版本：Apache 2.4 + PHP 8.2.12 + MySQL 8.2.0</p><h2 id="toc_16">搭建教程</h2><p>准备安装 Typecho 进行搭建网页测试。下载下来没有html，诶??? php 是什么啊，打开怎么是源码啊。</p><p>此处省略一万字，去学习了静态网页和动态网页的区别。</p><p><strong>安装 php 环境</strong></p><p>首先安装 php 环境，在 Windows 系统下有集成式安装软件 Wampserver，一键安装。</p><p>但是这东西又丑又卡，还不断弹出 cmd 窗口让我觉得是病毒软件，虽然在上面搭建成功了但也反手卸载了。</p><p>不如自己动手安装！</p><p>参考教程：<a href="https://zhuanlan.zhihu.com/p/123960715">记一次windows配置PHP环境</a>。</p><p>难得的优质教程，跟着他的教程来基本没有搜索别的内容了。</p><h3 id="toc_17"><strong>1 安装Apache2.4</strong></h3><p>1.1 Apache 的下载链接 <a href="https://httpd.apache.org/download.cgi">The Apache HTTP Server Project</a></p><p>1.2 点击 a number of third party vendors 下载 windows 版本</p><p>1.3 选择 ApacheHaus</p><p>1.4 选择 x64 的版本下载</p><p>1.5 建立个人主页文件夹 Home，将下载的 apache 解压到其中。</p><p>1.6 用记事本打开 conf 中的 httpd.conf，找到如下代码段</p><pre><code>Define SRVROOT &quot;/Apache24&quot;
ServerRoot &quot;${SRVROOT}&quot;</code></pre><p>将引号内的内容改为 Apache 的路径。</p><pre><code>Define SRVROOT &quot;E:/CloudMusic/VSCode/Home/Apache24&quot;
ServerRoot &quot;${SRVROOT}&quot;</code></pre><p>1.7 更改端口号</p><pre><code>Listen 80</code></pre><p>默认端口号是80，浏览器输入 localhost 就能访问，可以改为其他</p><pre><code>Listen 9700</code></pre><p>1.8 用管理员身份打开 cmd，然后进入 apache 的 bin 路径，用 httpd -k install 进行安装</p><p>1.9 安装完成之后在 /Apache24/bin 中打开 ApacheMonitor.exe 并启用服务。</p><p>1.10 验证安装，在浏览器输入localhost:9700 如果打开 apache 的首页即为安装成功。</p><h3 id="toc_18"><strong>2 安装PHP</strong></h3><p>2.1 下载 PHP8.2，直接到<a href="https://windows.php.net/download">官网</a>下载即可，笔者选择的版本是 VS16 x64 Thread Safe (2023-Oct-24 21:57:24)</p><p>2.2 解压到个人主页文件夹中</p><p>2.3 打开PHP的目录将 php.ini-development 先复制一份备份，然后把 php.ini-development 改为 php.ini 保存</p><p>2.4 打开 php.ini 修改配置，查找</p><pre><code>;extension_dir = &quot;ext&quot;</code></pre><p>改为 extension_dir = "ext的目录"，比如</p><pre><code>extension_dir = &quot;E:/CloudMusic/VSCode/Home/PHP/ext&quot;</code></pre><p>2.5 打开 apache/conf 的 httpd.conf，在 DirectoryIndex 后加上 index.php</p><pre><code>&lt;IfModule dir_module&gt;
    DirectoryIndex index.html index.php
&lt;/IfModule&gt;</code></pre><p>2.6 开启 rewrite 功能：将下面这行代码前面的 # 去掉（httpd.conf中）</p><pre><code>#LoadModule rewrite_module modules/mod_rewrite.so</code></pre><p>2.7 加载PHP模块，在 httpd.conf 中加入以下代码</p><pre><code class="lang-text">#php8
LoadModule php_module E:/CloudMusic/VSCode/Home/PHP/php8apache2_4.dll
&lt;IfModule php_module&gt; 
        PHPIniDir &quot;E:/CloudMusic/VSCode/Home/PHP/&quot; 
        AddType application/x-httpd-php .php
        AddType application/x-httpd-php-source .phps
&lt;/IfModule&gt;</code></pre><p>2.8 验证，注释 apache24/htdocs 中 index.html 的网页代码，输入下边这个输入下边这个 Hello World 代码，然后重命名为 index.php.</p><pre><code class="lang-text">&lt;?php
echo&quot;hello world&quot;
?&gt;</code></pre><p>在电脑浏览器输入 localhost:9700 , 若能正确显示 hello world , 则 php 网页已经能够显示了。</p><h3 id="toc_19"><strong>3 安装mysql</strong></h3><p>3.1 <a href="https://dev.mysql.com/downloads/mysql/">官网下载链接</a>。笔者选择的是 mysql-8.2.0-winx64.msi</p><p>3.2 直接安装的话可能会提示缺少 vs2019 的 redistributable. 到微软官网下载安装 <a href="https://aka.ms/vs/16/release/VC_redist.x64.exe">VC_redist.x64.exe</a></p><p>3.3 以<strong>管理员</strong>身份进入cmd命令行。执行</p><pre><code>cd C:\Program Files\MySQL\MySQL Server 8.2\bin
mysqld.exe --install
mysqld --initialize</code></pre><p>3.4 在 win+r 之后输入 services.msc 进入本地服务管理，启动 mysql 服务。</p><p>3.5 登录需要输入密码。在 C:\Program Files\MySQL\MySQL Server 8.2\data 中后缀名为 err 的文件中找到临时密码，搜索如下字段</p><pre><code>A temporary password is generated for root@localhost: &amp;baRyjS-b5mp</code></pre><p>3.6 输入 mysql -u root -p 和密码进行登录。登录之后修改密码。</p><pre><code class="lang-text"> ALTER USER &#039;root&#039;@&#039;localhost&#039; IDENTIFIED WITH mysql_native_password BY &#039;123456&#039;;</code></pre><p>3.7 输入如下代码创建数据库</p><pre><code>create DATABASE home;</code></pre><h3 id="toc_20"><strong>4 安装typecho</strong></h3><p>4.1 进入 /Apache24/htdocs 目录，将 typecho 解压到此处。在浏览器中打开 localhost:9700</p><p>4.2 安装提示缺少拓展，需要安装所需拓展。将 php.ini 对应的分号去掉即可。</p><pre><code>;extension=mbstring
;extension=openssl
;extension=pdo_mysql</code></pre><p>4.3 继续安装，数据库名称填 home，数据库密码填修改后的密码，其余问题不大。</p><p>4.4 安装完成后登录控制台，可以进行网页管理等操作。</p><p>4.5 第三方主题安装：解压到 /usr/themes ，插件安装：解压到 /usr/plugins ，启用即可。</p><p>4.6 若第三方主题启用失败建议查看 github issue 排查问题。</p><h3 id="toc_21">5 网站设置</h3><p>主题设置可以在 控制台-外观-设置外观 里找到，在此处启用数学公式解析。</p><p>设置-基本设置-站点地址，可以更改站点地址。</p><p><strong>启用https</strong></p><p>如果不关心网站的“不安全”提示，SSL 证书可以暂时不管。</p><p>首先登录 Typecho 后台 -&gt; 设置 -&gt; 基本设置 -&gt; 站点地址改成 https 的域名</p><p>然后编辑 Typecho 站点根目录下的文件<code>config.inc.php</code>加入下面一行配置。</p><pre><code>/** 开启HTTPS */
define(&#039;__TYPECHO_SECURE__&#039;,true);</code></pre><p>然后在站点主题目录下找到<code>comments.php</code>文件，并搜索到<code>$this-&gt;commentUrl()</code>，将其修改为：<code>echo str_replace(&quot;http&quot;,&quot;https&quot;,$this-&gt;commentUrl())</code>，然后点击保存即可。</p><p>在开启 https 之后，网站的所有图片外链都需要修改为 https 外链，否则无法正常加载。</p><p><strong>内网穿透设置</strong></p><p>使用 SakuraFrp，设置本地端口为 443 即可。</p><p>在网站未启用 https 的情况下，开启 “强制 https” 会有 bug，会把 http 请求都转换为 https，一些本地的图片资源链接 <code>http://localhost/xxx</code> 也会被强制转换为 <code>https://dhui626.github.io/xxx</code> ，导致无法正常显示。</p><p>建议图片外链选择 <code>github.io</code> ，作为免费的图床。</p><p>站点地址改成 <code>https://dhui626.github.io</code> 之后，还是会有 bug，在本地能打开网页，但在其他设备打开无法正常显示。需要将站点地址改为内网穿透地址。如笔者的 <code>https://frp-oak.top:56651/</code>。改了之后用 localhost 还是能登陆的，不用担心不小心把内网穿透隧道删除了而再也进不去了的问题。</p><p><strong>首页静态Html生成</strong></p><p>参考 <a href="https://sunpma.com/484.html">Typecho生成首页静态HTML数倍提高网站打开速度</a></p><p>在网站根目录创建一个php文件，重命名为static.php</p><pre><code>&lt;?php
    $nowtime=time();
    $pastsec = $nowtime - $_GET[&quot;t&quot;];
    if($pastsec&lt;600){
      exit; //10分钟更新一次，时间可以自己调整
    }
    ob_start(); //打开缓冲区
    include(&quot;index.php&quot;);
    $content = ob_get_contents(); //得到缓冲区的内容
    $content .= &quot;\n&lt;script language=javascript src=\&quot;static.php?t=&quot;.$nowtime.&quot;\&quot;&gt;&lt;/script&gt;&quot;;
    //加上调用更新程序的代码

    file_put_contents(&quot;index.html&quot;,$content);
    if (!function_exists(&quot;file_put_contents&quot;)){
      function file_put_contents($fn,$fs){
        $fp=fopen($fn,&quot;w+&quot;);
        fputs($fp,$fs);
        fclose($fp);  
      }
    }
?&gt;</code></pre><p>设置网站优先打开 <code>index.html</code> 而不是<code>index.php</code>，即可在每次打开 html 提高速度，且会根据设定的时间间隔更新。</p><p><strong>全站静态Html生成</strong></p><p>参考 <a href="https://ilay.top/p/310.html">typecho全站静态化方案</a> 、 <a href="https://mikuos.com/1130.html">typecho完全静态化</a></p><p>因动态网站部署麻烦，许多站点仅支持静态网站，如 <code>github.io</code> 。本方法可以导出全站的静态html。</p><p>创建以下脚本并命名为<code>staticpass.php</code> .</p><p>上述参考的代码是 Linux 环境下的代码，笔者已将其转化为 Windows 代码。需要手动安装 wget .</p><p>注意 url 是需要爬虫的网页地址，rurl是需要部署静态网页的地址，需要相应修改。</p><pre><code>&lt;?php
$url = &#039;https://dhui626.github.io&#039;; //网址，不能以&quot;/&quot;结尾
$rurl= &#039;&#039;; //要替换成路径或网址，可为空，不能以&quot;/&quot;结尾
$dir = __DIR__ . &quot;/&quot; . str_replace(&#039;https://&#039;, &#039;&#039;, str_replace(&#039;http://&#039;, &quot;&quot;, $url));
exec(&quot;cls&quot;,$clc);
echo $clc[0];
echo &quot;开始下载文件\r\n&quot;;
exec(&quot;RMDIR /S /Q {$dir}&quot;,$return); //小心调用！
exec(&quot;wget --no-check-certificate -r -p -np {$url}&quot;,$return);

$dirs = get_filenamesbydir($dir);

//不处理非html文件
for ($i = 0; $i &lt; count($dirs); $i++) {
    $file=str_replace(__DIR__, &quot;&quot;, $dirs[$i][&#039;file&#039;]);

    if (!preg_match(&quot;/html/&quot;,$file)  ) {
        //删除对应的元素
        echo &quot;\r\n不处理文件:\r\n&quot;;
        echo $file;
        unset($dirs[$i]); 
    }  
}
array_filter($dirs);
sort($dirs);//重新生成索引下标

//网址处理
$count=count($dirs);
for ($i = 0; $i &lt; $count; $i++) {
    // echo $url;
    // echo $rurl;
    $content=str_replace($url,$rurl,file_get_contents($dirs[$i][&#039;file&#039;]));
    // echo $dirs[$i][&#039;file&#039;];
    file_put_contents($dirs[$i][&#039;file&#039;],$content);
    $n=$i+1;
    exec(&quot;cls&quot;,$clc);
    echo $clc[0];
    echo &quot;文件下载完毕\r\n&quot;;
    echo &quot;开始处理文件,共{$count}个文件需要处理,已处理{$n}个\r\n&quot;;
    
}
echo &quot;处理完毕，文件目录：{$dir}\r\n&quot;;

function get_allfiles($path, &amp;$files)
{
    if (is_dir($path)) {
        $dp = dir($path);
        while ($file = $dp-&gt;read()) {
            if ($file !== &quot;.&quot; &amp;&amp; $file !== &quot;..&quot;) {
                get_allfiles($path . &quot;/&quot; . $file, $files);
            }
        }
        $dp-&gt;close();
    }
    if (is_file($path)) {
        $files[] = [&#039;file&#039; =&gt; $path];
    }
}
function get_filenamesbydir($dir)
{
    $files = array();
    get_allfiles($dir, $files);
    return $files;
}</code></pre><p>执行</p><pre><code>cd E:\CloudMusic\VSCode\Home\Apache24\htdocs
php staticpass.php</code></pre><p>注意 "php 绝对目录下的staticpass.php" 代码会在当前目录（如未设置php环境变量就是在php根目录中）创建，而不是站点目录，笔者因为这个愚蠢的问题调试了一个多小时的 bug。</p><p><strong>php代码调试</strong></p><p>参考 <a href="https://developers.weixin.qq.com/community/develop/article/doc/000c688fb7cf502571bf4a5b756c13">vscode调试php（解决vscode远程调试无效的问题）</a></p><p>但因为静态网站转换的代码无问题，暂时不打算研究 php 调试相关的问题。</p><h2 id="toc_22">参考资料</h2><p><strong>博客范例参考链接</strong></p><p><a href="https://hikami.moe/">希卡米 | HiKami</a>：Theme <a href="https://github.com/solstice23/argon-theme">Argon</a> By solstice23</p><p><a href="https://www.himiku.com/">初之音</a>：Powered by <a href="http://typecho.org/">Typecho</a>  Theme <a href="https://blog.imalan.cn/archives/247/">VOID</a></p><p><a href="https://ednovas.xyz/">EdNovas 的小站</a> ：Framework <a href="https://hexo.io/">Hexo</a> Theme <a href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></p><p><strong>静态网页模板参考链接（没用上）</strong></p><p><a href="https://freehtml5.co/">FreeHtml5</a></p><p><a href="https://html5up.net/">HTML5 UP</a></p><p><strong>Web开发学习链接</strong></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Learn">mdn web docs</a></p><p>End</p>
]]></content>
<link rel="replies" type="text/html" href="https://dhui626.github.io/index.php/archives/3/#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://dhui626.github.io/index.php/feed/atom/category/default/" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[欢迎使用 Typecho]]></title>
<link rel="alternate" type="text/html" href="https://dhui626.github.io/index.php/archives/1/" />
<id>https://dhui626.github.io/index.php/archives/1/</id>
<updated>2023-10-26T14:49:00+00:00</updated>
<published>2023-10-26T14:49:00+00:00</published>
<author>
    <name>dhui</name>
    <uri>https://dhui626.github.io/</uri>
</author>
<summary type="html"><![CDATA[如果您看到这篇文章,表示您的 blog 已经安装成功.]]></summary>
<content type="html" xml:base="https://dhui626.github.io/index.php/archives/1/" xml:lang="zh-CN"><![CDATA[
<p>如果您看到这篇文章,表示您的 blog 已经安装成功.</p>
]]></content>
<link rel="replies" type="text/html" href="https://dhui626.github.io/index.php/archives/1/#comments" thr:count="1" />
<link rel="replies" type="application/atom+xml" href="https://dhui626.github.io/index.php/feed/atom/category/default/" thr:count="1"/>
</entry>
</feed>